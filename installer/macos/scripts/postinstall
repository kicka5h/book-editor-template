#!/bin/bash
# postinstall — runs as root after the PKG payload is extracted
# Pandoc and pdflatex are bundled inside Beckit.app — no downloads needed.
# This script only ensures Git is available for GitHub sync.
set -euo pipefail

if /usr/bin/git --version &>/dev/null 2>&1; then
  echo "Git already available via Xcode CLT — skipping."
  exit 0
fi

# Trigger the Xcode CLT install dialog on next user login (non-interactive here)
xcode-select --install 2>/dev/null || true
echo "Beckit installed successfully."
echo "If GitHub sync fails, install Git by running: xcode-select --install"
exit 0
